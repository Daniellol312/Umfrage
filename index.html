<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database.js"></script>
<script>
  // Firebase konfigurieren
  const firebaseConfig = {
    apiKey: "DEINE_API_KEY",
    authDomain: "DEINE_AUTH_DOMAIN",
    databaseURL: "DEINE_DATABASE_URL",
    projectId: "DEINE_PROJECT_ID",
    storageBucket: "DEINE_STORAGE_BUCKET",
    messagingSenderId: "DEINE_MESSAGING_SENDER_ID",
    appId: "DEINE_APP_ID"
  };

  const app = firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  // Abstimmung speichern
  const form = document.getElementById('pollForm');
  form.addEventListener('submit', (event) => {
    event.preventDefault();
    const option = new FormData(form).get('option');
    const ref = db.ref('votes/' + option);
    ref.transaction((current) => (current || 0) + 1);
    form.reset();
    loadResults();
  });

  // Ergebnisse anzeigen
  async function loadResults() {
    const snapshot = await db.ref('votes').get();
    const results = snapshot.val() || {};
    const resultsDiv = document.getElementById('results');
    resultsDiv.innerHTML = Object.entries(results)
      .map(([option, votes]) => `${option}: ${votes} Stimmen`)
      .join('<br>');
  }

  loadResults();
</script>
